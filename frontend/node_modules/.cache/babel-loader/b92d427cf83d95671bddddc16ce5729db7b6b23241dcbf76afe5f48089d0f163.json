{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\n\n/**\n * Detect document types (intents) from question.\n * @param {string} question - User's question\n * @returns {Promise<string[]>} - Array of document types (e.g., [\"METADATA\", \"LINEAGE\"])\n */\nexport const detectIntent = async question => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/detect-intent`, {\n      question\n    });\n    return response.data; // Returns array of doc_types\n  } catch (error) {\n    console.error('Error detecting intent:', error);\n    throw error;\n  }\n};\n\n/**\n * Search vector database for relevant documents.\n * @param {string} question - User's question\n * @param {string[]} docTypes - Array of document types to search\n * @param {Object} options - Optional parameters (table, keyspace, topK)\n * @returns {Promise<Object>} - Response with documents array and count\n */\nexport const searchVector = async (question, docTypes, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/search-vector`, {\n      question,\n      docTypes,\n      table: options.table,\n      keyspace: options.keyspace,\n      topK: options.topK\n    });\n    return response.data; // Returns { documents: [], count: number }\n  } catch (error) {\n    console.error('Error searching vectors:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query: Ask question and get answer.\n * This endpoint handles the complete flow: intent detection -> vector search -> LLM generation.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<string>} - Generated answer from Phi-4\n */\nexport const askQuestion = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns answer string\n  } catch (error) {\n    console.error('Error asking question:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query with detailed step-by-step progress.\n * Returns answer plus detailed progress for each step.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<Object>} - Response with answer, steps, and summary\n */\nexport const askQuestionDetailed = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask-detailed`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns { answer, steps: [], summary: {} }\n  } catch (error) {\n    console.error('Error asking question with details:', error);\n    throw error;\n  }\n};\n\n/**\n * Legacy endpoint: /rag/query (for backward compatibility)\n */\nexport const queryRag = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/query`, {\n      question,\n      keyspace: options.keyspace || 'transaction_keyspace',\n      table: options.table || 'dda_transactions',\n      timeRange: options.timeRange || '7d',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error in RAG query:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","detectIntent","question","response","post","data","error","console","searchVector","docTypes","options","table","keyspace","topK","askQuestion","temperature","maxTokens","timeout","askQuestionDetailed","queryRag","timeRange"],"sources":["/Users/subhalakshmiraj/Documents/phi4local/mvp/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\n\n/**\n * Detect document types (intents) from question.\n * @param {string} question - User's question\n * @returns {Promise<string[]>} - Array of document types (e.g., [\"METADATA\", \"LINEAGE\"])\n */\nexport const detectIntent = async (question) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/detect-intent`, { \n      question \n    });\n    return response.data; // Returns array of doc_types\n  } catch (error) {\n    console.error('Error detecting intent:', error);\n    throw error;\n  }\n};\n\n/**\n * Search vector database for relevant documents.\n * @param {string} question - User's question\n * @param {string[]} docTypes - Array of document types to search\n * @param {Object} options - Optional parameters (table, keyspace, topK)\n * @returns {Promise<Object>} - Response with documents array and count\n */\nexport const searchVector = async (question, docTypes, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/search-vector`, {\n      question,\n      docTypes,\n      table: options.table,\n      keyspace: options.keyspace,\n      topK: options.topK\n    });\n    return response.data; // Returns { documents: [], count: number }\n  } catch (error) {\n    console.error('Error searching vectors:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query: Ask question and get answer.\n * This endpoint handles the complete flow: intent detection -> vector search -> LLM generation.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<string>} - Generated answer from Phi-4\n */\nexport const askQuestion = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns answer string\n  } catch (error) {\n    console.error('Error asking question:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query with detailed step-by-step progress.\n * Returns answer plus detailed progress for each step.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<Object>} - Response with answer, steps, and summary\n */\nexport const askQuestionDetailed = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask-detailed`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns { answer, steps: [], summary: {} }\n  } catch (error) {\n    console.error('Error asking question with details:', error);\n    throw error;\n  }\n};\n\n/**\n * Legacy endpoint: /rag/query (for backward compatibility)\n */\nexport const queryRag = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/query`, {\n      question,\n      keyspace: options.keyspace || 'transaction_keyspace',\n      table: options.table || 'dda_transactions',\n      timeRange: options.timeRange || '7d',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error in RAG query:', error);\n    throw error;\n  }\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}