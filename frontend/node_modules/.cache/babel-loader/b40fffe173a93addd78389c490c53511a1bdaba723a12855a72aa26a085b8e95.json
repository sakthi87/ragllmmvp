{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:8080/api';/**\n * Detect document types (intents) from question.\n * @param {string} question - User's question\n * @returns {Promise<string[]>} - Array of document types (e.g., [\"METADATA\", \"LINEAGE\"])\n */export const detectIntent=async question=>{try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/rag/detect-intent\"),{question});return response.data;// Returns array of doc_types\n}catch(error){console.error('Error detecting intent:',error);throw error;}};/**\n * Search vector database for relevant documents.\n * @param {string} question - User's question\n * @param {string[]} docTypes - Array of document types to search\n * @param {Object} options - Optional parameters (table, keyspace, topK)\n * @returns {Promise<Object>} - Response with documents array and count\n */export const searchVector=async function(question,docTypes){let options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/rag/search-vector\"),{question,docTypes,table:options.table,keyspace:options.keyspace,topK:options.topK});return response.data;// Returns { documents: [], count: number }\n}catch(error){console.error('Error searching vectors:',error);throw error;}};/**\n * Full RAG query: Ask question and get answer.\n * This endpoint handles the complete flow: intent detection -> vector search -> LLM generation.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<string>} - Generated answer from Phi-4\n */export const askQuestion=async function(question){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/rag/ask\"),{question,table:options.table||'dda_transactions',keyspace:options.keyspace||'transaction_keyspace',topK:options.topK||6,temperature:options.temperature||0.3,maxTokens:options.maxTokens||100},{timeout:600000// 10 minutes for CPU-only inference\n});return response.data;// Returns answer string\n}catch(error){console.error('Error asking question:',error);throw error;}};/**\n * Full RAG query with detailed step-by-step progress.\n * Returns answer plus detailed progress for each step.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<Object>} - Response with answer, steps, and summary\n */export const askQuestionDetailed=async function(question){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/rag/ask-detailed\"),{question,table:options.table||'dda_transactions',keyspace:options.keyspace||'transaction_keyspace',topK:options.topK||6,temperature:options.temperature||0.3,maxTokens:options.maxTokens||100},{timeout:600000// 10 minutes for CPU-only inference\n});return response.data;// Returns { answer, steps: [], summary: {} }\n}catch(error){console.error('Error asking question with details:',error);throw error;}};/**\n * Legacy endpoint: /rag/query (for backward compatibility)\n */export const queryRag=async function(question){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const response=await axios.post(\"\".concat(API_BASE_URL,\"/rag/query\"),{question,keyspace:options.keyspace||'transaction_keyspace',table:options.table||'dda_transactions',timeRange:options.timeRange||'7d',topK:options.topK||6,temperature:options.temperature||0.3,maxTokens:options.maxTokens||100},{timeout:600000});return response.data;}catch(error){console.error('Error in RAG query:',error);throw error;}};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","detectIntent","question","response","post","concat","data","error","console","searchVector","docTypes","options","arguments","length","undefined","table","keyspace","topK","askQuestion","temperature","maxTokens","timeout","askQuestionDetailed","queryRag","timeRange"],"sources":["/Users/subhalakshmiraj/Documents/phi4local/mvp/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';\n\n/**\n * Detect document types (intents) from question.\n * @param {string} question - User's question\n * @returns {Promise<string[]>} - Array of document types (e.g., [\"METADATA\", \"LINEAGE\"])\n */\nexport const detectIntent = async (question) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/detect-intent`, { \n      question \n    });\n    return response.data; // Returns array of doc_types\n  } catch (error) {\n    console.error('Error detecting intent:', error);\n    throw error;\n  }\n};\n\n/**\n * Search vector database for relevant documents.\n * @param {string} question - User's question\n * @param {string[]} docTypes - Array of document types to search\n * @param {Object} options - Optional parameters (table, keyspace, topK)\n * @returns {Promise<Object>} - Response with documents array and count\n */\nexport const searchVector = async (question, docTypes, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/search-vector`, {\n      question,\n      docTypes,\n      table: options.table,\n      keyspace: options.keyspace,\n      topK: options.topK\n    });\n    return response.data; // Returns { documents: [], count: number }\n  } catch (error) {\n    console.error('Error searching vectors:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query: Ask question and get answer.\n * This endpoint handles the complete flow: intent detection -> vector search -> LLM generation.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<string>} - Generated answer from Phi-4\n */\nexport const askQuestion = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns answer string\n  } catch (error) {\n    console.error('Error asking question:', error);\n    throw error;\n  }\n};\n\n/**\n * Full RAG query with detailed step-by-step progress.\n * Returns answer plus detailed progress for each step.\n * @param {string} question - User's question\n * @param {Object} options - Optional parameters\n * @returns {Promise<Object>} - Response with answer, steps, and summary\n */\nexport const askQuestionDetailed = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/ask-detailed`, {\n      question,\n      table: options.table || 'dda_transactions',\n      keyspace: options.keyspace || 'transaction_keyspace',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000 // 10 minutes for CPU-only inference\n    });\n    return response.data; // Returns { answer, steps: [], summary: {} }\n  } catch (error) {\n    console.error('Error asking question with details:', error);\n    throw error;\n  }\n};\n\n/**\n * Legacy endpoint: /rag/query (for backward compatibility)\n */\nexport const queryRag = async (question, options = {}) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/rag/query`, {\n      question,\n      keyspace: options.keyspace || 'transaction_keyspace',\n      table: options.table || 'dda_transactions',\n      timeRange: options.timeRange || '7d',\n      topK: options.topK || 6,\n      temperature: options.temperature || 0.3,\n      maxTokens: options.maxTokens || 100\n    }, {\n      timeout: 600000\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error in RAG query:', error);\n    throw error;\n  }\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}